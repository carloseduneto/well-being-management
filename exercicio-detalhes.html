<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestão de treino</title>
    <link rel="stylesheet" href="./assets/styles/style.css" />
    <link rel="stylesheet" href="./assets/styles/details.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />

    <link
      rel="shortcut icon"
      href="./assets/images/logo.png"
      type="image/x-icon"
    />

    <link rel="manifest" href="./manifest.json" />
    <meta name="theme-color" content="#ff6314" />
  </head>
  <body>
    <!-- <h1>Enviar dados pro backend</h1>
  <button id="enviar">Criar exemplo</button>
  <button id="apagar">Apagar registro 7</button>
  <button id="atualizar">Atualizar</button>
  <button id="exibir">Exibir no console</button> -->
    <header>
      <div class="header">
        <div class="headerLeft">
          <a href="index.html">
            <span class="material-symbols-rounded"> arrow_back_ios </span>
          </a>
          <h2 class="titleScreen">Detalhes</h2>
        </div>

        <div class="headerRight">
          <span class="material-symbols-rounded"> edit </span>
          <span class="material-symbols-rounded"> delete </span>
        </div>
      </div>

      <div class="exerciseDetail">
        <div class="exerciseDetailCard">
          <div class="swapExercise">
            <span class="material-symbols-rounded swapExerciseIcon">
              arrow_back_ios
            </span>
            <span class="material-symbols-rounded swapExerciseIconRight">
              arrow_back_ios
            </span>
          </div>
          <div class="swapExerciseDetail">
            <span class="exerciseTitle">Lorem Ipsum</span>

            <div class="progressExerciseDetail">
              <div class="progressBarExerciseDetail"></div>
              <span class="progressExerciseNumber">3/5</span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <div class="contentDetails">
      <div class="recomendation">
        <span class="detalisTitleInput">Recomendações</span>
        <span class="detalisTitleInputRecomendation"
          >1X peso bem leve, 10 a 12 repetições. <br />1X um pouco mais pesado
          10 a 12 repetições. <br />1X mais pesada, 8 repetições. (-1)<br />
          1X Top séries</span
        >
      </div>

      <div class="inputData">
        <label class="detalisTitleInput" for="weightInput"
          >Séries recomendadas</label
        >
        <select
          name=""
          id="recomendationSeries"
          class="inputDetails selectDetails"
        >
          <option value="" disabled selected>2x6a8</option>
          <option value="8">2x6a8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
        </select>

        <!-- Repetições e carga inputs -->
        <div class="shortInputContainer">
          <div class="inputData shortInputData">
            <label class="detalisTitleInput" for="repetition">Repetições</label>
            <input
              class="inputDetails"
              type="number"
              id="repetition"
              placeholder=""
            />
          </div>

          <div class="inputData shortInputData">
            <label class="detalisTitleInput" for="weightInputCarga"
              >Carga (kg)</label
            >
            <input
              class="inputDetails weight-mask"
              type="text"
              id="weightInputCarga"
              inputmode="decimal"
              placeholder="Ex: 20"
              aria-label="Carga em quilogramas"
            />
          </div>
        </div>

        <div class="shortInputContainer">
          <div class="inputData shortInputData">
            <label class="detalisTitleInput" for="repetition"
              >Esforço (RPE)</label
            >
            <input
              class="inputDetails"
              type="number"
              id="repetition"
              placeholder=""
            />
          </div>

          <div class="inputData shortInputData">
            <label class="detalisTitleInput" for="weightInputCarga"
              >Até a falha (RPI)</label
            >
            <input
              class="inputDetails weight-mask"
              type="text"
              id="weightInputCarga2"
              inputmode="decimal"
              placeholder=""
              aria-label="Carga em quilogramas"
            />
          </div>
        </div>
      </div>

      <label class="detalisTitleInput" for="historico">Histórico</label>

      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Data</th>
              <th>Repetições</th>
              <th>Carga (kg)</th>
              <th>RPE</th>
              <th>RPI</th>
              <th>Intervalo</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>10/06/2024</td>
              <td>8</td>
              <td>20</td>
              <td>10</td>
              <td>7</td>
              <td>2</td>
            </tr>
            <tr>
              <td>12/06/2024</td>
              <td>8</td>
              <td>25</td>
              <td>8</td>
              <td>8</td>
              <td>1</td>
            </tr>
            <tr>
              <td>14/06/2024</td>
              <td>6</td>
              <td>30</td>
              <td>6</td>
              <td>9</td>
              <td>0</td>
            </tr>
            <tr>
              <td>14/06/2024</td>
              <td>6</td>
              <td>30</td>
              <td>6</td>
              <td>9</td>
              <td>0</td>
            </tr>
            <tr>
              <td>14/06/2024</td>
              <td>6</td>
              <td>30</td>
              <td>6</td>
              <td>9</td>
              <td>0</td>
            </tr>
          </tbody>
        </table>
      </div>

      <label class="detalisTitleInput" for="comentarios">Comentários</label>
      <textarea
        class="inputDetails textAreaDetails"
        id="comentarios"
        placeholder="Escreva aqui seus comentários sobre o exercício..."
      ></textarea>

      <section class="commentsSection">
        <div class="commentsHistoryContainer">
          <div class="commentsHistory">
            <span class="commentDate">segunda-feira - 10/06/2024</span>
            <span class="commentText">
              Senti que consegui aumentar a carga dessa vez, mas poderia ter
              feito mais repetições.
            </span>
          </div>

          <div class="commentsHistory">
            <span class="commentDate">quarta-feira - 12/06/2024</span>
            <span class="commentText">
              Consegui completar todas as séries com a carga recomendada. Me
              senti bem durante o exercício.
            </span>
          </div>

          <div class="commentsHistory">
            <span class="commentDate">sexta-feira - 14/06/2024</span>
            <span class="commentText">
              Tive dificuldade na última série, talvez precise ajustar a carga
              para a próxima vez.
            </span>
          </div>
        </div>

        <button class="seeMoreComments">
          <span>Ver mais comentários</span>
        </button>
      </section>

      <button class="primaryButtonAction">
        <span class="material-symbols-rounded primaryIconAction"> check </span>
      </button>
    </div>

    <script>
      if (typeof navigator.serviceWorker !== "undefined") {
        navigator.serviceWorker
          .register("./service-worker.js")
          .then(() => console.log("Service Worker registrado"))
          .catch(err =>
            console.error("Erro ao registrar Service Worker:", err)
          );
      }

      /*
      //Apagar caso não precise mais desses exemplos de requisições fetch
      let deferredPrompt;

window.addEventListener('beforeinstallprompt', (e) => {
  // Impede o Chrome de mostrar o pop-up automático
  e.preventDefault();
  deferredPrompt = e;

  // Exibe seu botão de instalar
  const installBtn = document.getElementById('installBtn');
  installBtn.style.display = 'block';
  
  installBtn.addEventListener('click', async () => {
    console.log('beforeinstallprompt disparado');
    installBtn.style.display = 'none';
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    console.log(`Usuário escolheu: ${outcome}`);
    deferredPrompt = null;
  });
});

//Apagar caso não precise mais desses exemplos de requisições fetch

*/

      let deferredPrompt;
      const installButton = document.getElementById("installButton");

      window.addEventListener("beforeinstallprompt", e => {
        console.log("beforeinstallprompt disparado");
        // Previne que o pop-up padrão do navegador apareça
        e.preventDefault();
        // Armazena o evento para que ele possa ser chamado mais tarde
        deferredPrompt = e;
        // Mostra o botão de instalação
        installButton.style.display = "block";

        installButton.addEventListener("click", e => {
          // Esconde o botão
          installButton.style.display = "none";
          // Mostra o pop-up de instalação do navegador
          deferredPrompt.prompt();
          // Espera a escolha do usuário
          deferredPrompt.userChoice.then(choiceResult => {
            deferredPrompt = null;
          });
        });
      });

      document.getElementById("enviar").onclick = async () => {
        const resposta = await fetch("http://localhost:3000/example", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            value:
              "Abracadabra oh na na na, morta gaga. Hello hello baby you called, I can't hear a thing. I have got no service in the club.",
          }),
        });

        const resultado = await resposta.json();
        console.log(resultado);
        alert("Registro criado!");
      };

      document.getElementById("apagar").onclick = async () => {
        const resposta = await fetch("http://localhost:3000/example/7", {
          method: "DELETE",
          headers: { "Content-Type": "application/json" },
          // body: JSON.stringify({
          //   value: "Exemplo pelo front nº 2",

          // })
        });

        const resultado = await resposta.json();
        console.log(resultado);
        alert("Registro apagado!");
      };

      document.getElementById("atualizar").onclick = async () => {
        const resposta = await fetch("http://localhost:3000/example/8", {
          method: "PATCH",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            value: "I can't see me cry" + "Can't see me cry ever again",
          }),
        });

        const resultado = await resposta.json();
        console.log(resultado);
        alert("Registro atualizado!");
      };

      document.getElementById("exibir").onclick = async () => {
        const resposta = await fetch("http://localhost:3000/treino", {
          method: "GET",
          headers: { "Content-Type": "application/json" },
        });

        const resultado = await resposta.json();
        console.log(resultado);
        alert("Registro atualizado!");
      };
    </script>

    <script src="./assets/scripts/script2.js"></script>

    <footer>
      <div class="navButtons navButtonsActive">
        <span class="material-symbols-rounded"> exercise </span>
        <span>Treino</span>
      </div>
      <div class="navButtons">
        <span class="material-symbols-rounded"> history </span>
        <span>Histórico</span>
      </div>
      <div class="navButtons">
        <span class="material-symbols-rounded"> monitoring </span>
        <span>Avaliação física</span>
      </div>
      <div class="navButtons">
        <span class="material-symbols-rounded"> restaurant </span>
        <span>Refeições</span>
      </div>
    </footer>
    
  </body>
</html>
